.container
  .quiz-container
    - @mistakes.each_with_index do |mistake, i|
      .quiz-content.quiz-bg
        .quiz-title
          Q
          = i + 1
        .quiz-quiz
          = mistake.quiz.quiz
        
        .explanation.hidden
          .explanationch
            解説
          .explanationp
            %pre 
              = mistake.quiz.explanation
        .add-mistake.btn{"data-id": "#{mistake.quiz.id}"}
          - if !Favorite.exists?(user_id: current_user.id, quiz_id: mistake.quiz.id)
            = link_to "お気に入りに追加", quiz_favorites_path(mistake.quiz), method: :post, class:"addfavorite"
          - else
            = link_to "お気に入り解除", quiz_favorite_path(mistake.quiz), method: :delete, class: "removefavorite"
        .choices      
          - mistake.quiz.choices.each_with_index do |c, k|
            .achoice{"data-id": "#{c.correct}"} 
              - if !Mistake.exists?(user_id: current_user.id, quiz_id: mistake.quiz.id)
                = link_to "#{k + 1}. #{c.text}", quiz_mistakes_path(mistake.quiz), method: :post, class: "addmistake choice" 
              - else
                .choice
                  = "#{k + 1}. #{c.text}" 

